# v0.1.2 Docker沙箱方案

## 概述

本版本实现Docker容器的持久化管理，使Agent能够在多步骤任务中保持状态。

## 设计文档

| 文档 | 说明 |
|------|------|
| [迭代1-容器持久化.md](./迭代1-容器持久化.md) | 详细设计（四件套+代码） |
| [迭代1-影响分析.md](./迭代1-影响分析.md) | 影响范围和兼容性分析 |

## 四件套摘要

| 项目 | 内容 |
|------|------|
| **现象** | 每次execute都创建/销毁容器，状态无法保持 |
| **意图** | 同一thread复用容器，显式销毁 |
| **情境** | Python 3.13+, Docker SDK, 继承BaseSandbox |
| **边界** | 不做预热池、自动清理、资源限制 |

## 影响范围

| 文件 | 改动类型 | 影响程度 |
|------|---------|---------|
| `src/docker_sandbox.py` | 核心修改 | 高 |
| `api/server.py` | 新增端点 | 低 |
| `src/agent_manager.py` | 无需修改 | 无 |
| 现有API接口 | 全部兼容 | 无 |

## 实施顺序

1. ✅ 设计文档（当前）
2. ✅ 影响分析（当前）
3. ⬜ 实现docker_sandbox.py改造
4. ⬜ 实现DELETE端点
5. ⬜ 编写测试用例
6. ⬜ 验收测试
